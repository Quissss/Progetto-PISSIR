@page
@model Progetto.App.Pages.CarModel
@{
    ViewData["Title"] = "My Cars";
}
<h2><i class="fa-solid fa-car"></i> <strong>@ViewData["Title"]</strong></h2>

<div class="container-fluid">
    <div class="row">
        <partial name="_DashboardPartial" />

        <!-- Main content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div id="jsGridCar"></div>

            <!-- Line chart -->
            <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>
        </main>
    </div>
</div>


@section Scripts {
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"></script>
    <script>
        const userId = @Html.Raw(Json.Serialize(Model.UserId));

        $(document).ready(function () {
            var userId = '@Model.UserId';
            $.ajax({
                url: '/api/Car/GetCarsByOwner/' + userId,
                method: 'GET',
                success: function (data) {
                    // Inizializza jsGrid o altre UI con i dati ottenuti
                    $("#jsGridCar").jsGrid({
                        data: data,
                        // Configurazioni di jsGrid
                    });
                },
                error: function (error) {
                    console.log("Errore nel caricamento dei dati delle auto:", error);
                }
            });
        });
    </script>
    <script type="text/javascript" src="~/js/jsGridCar.js" asp-append-version="true"></script>
}